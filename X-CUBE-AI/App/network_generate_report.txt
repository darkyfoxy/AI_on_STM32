Neural Network Tools for STM32AI v1.4.1 (STM.ai v6.0.0-RC6)
Created date       : 2021-10-30 17:56:25
Parameters         : generate --name network -m E:/base/base_data/project/STM/AI_on_STM32/network_CIFAR10/network.onnx --type onnx --compression 1 --verbosity 1 --workspace C:\Users\vlavi\AppData\Local\Temp\mxAI_workspace95487539491900010864908446801677276 --output C:\Users\vlavi\.stm32cubemx

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file         : E:\base\base_data\project\STM\AI_on_STM32\network_CIFAR10\network.onnx
type               : onnx
c_name             : network
compression        : None
quantize           : None
workspace dir      : C:\Users\vlavi\AppData\Local\Temp\mxAI_workspace95487539491900010864908446801677276
output dir         : C:\Users\vlavi\.stm32cubemx

model_name         : network
model_hash         : 0fa7755a7f67eb16549ac5508a7fb879
input              : modelInput [3072 items, 12.00 KiB, ai_float, FLOAT32, (32, 32, 3)]
inputs (total)     : 12.00 KiB
output             : modelOutput [10 items, 40 B, ai_float, FLOAT32, (1, 1, 10)]
outputs (total)    : 40 B
params #           : 272,810 items (1065.66 KiB)
macc               : 29,702,230
weights (ro)       : 1,091,240 B (1065.66 KiB) 
activations (rw)   : 139,648 B (136.38 KiB) 
ram (total)        : 151,976 B (148.41 KiB) = 139,648 + 12,288 + 40

Model name - network ['modelInput'] ['modelOutput']
------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type)                 shape                param/size        macc        connected to   |   c_size              c_macc             c_type      
------------------------------------------------------------------------------------------------------------------------------------------------------------
0    modelInput (Input)           (h:32, w:32, c:3)                                                 |                                         
     node_52 (Conv2D)             (h:32, w:32, c:32)   896/3,584         884,768     modelInput     |                       +32,768(+3.7%)     conv2d()[0] 
------------------------------------------------------------------------------------------------------------------------------------------------------------
1    node_53 (Nonlinearity)       (h:32, w:32, c:32)                     32,768      node_52        |                       -32,768(-100.0%)  
------------------------------------------------------------------------------------------------------------------------------------------------------------
2    node_54 (ScaleBias)          (h:32, w:32, c:32)   64/256            65,536      node_53        |                                          bn()[1]     
------------------------------------------------------------------------------------------------------------------------------------------------------------
3    node_55 (Conv2D)             (h:32, w:32, c:32)   9,248/36,992      9,437,216   node_54        |                       +32,768(+0.3%)     conv2d()[2] 
------------------------------------------------------------------------------------------------------------------------------------------------------------
4    node_56 (Nonlinearity)       (h:32, w:32, c:32)                     32,768      node_55        |                       -32,768(-100.0%)  
------------------------------------------------------------------------------------------------------------------------------------------------------------
5    node_57 (ScaleBias)          (h:32, w:32, c:32)   64/256            65,536      node_56        |                                          bn()[3]     
------------------------------------------------------------------------------------------------------------------------------------------------------------
6    node_58 (Pool)               (h:16, w:16, c:32)                     32,768      node_57        |                                          pool()[4]   
------------------------------------------------------------------------------------------------------------------------------------------------------------
7    node_59 (Conv2D)             (h:16, w:16, c:64)   18,496/73,984     4,718,656   node_58        |                       +16,384(+0.3%)     conv2d()[5] 
------------------------------------------------------------------------------------------------------------------------------------------------------------
8    node_60 (Nonlinearity)       (h:16, w:16, c:64)                     16,384      node_59        |                       -16,384(-100.0%)  
------------------------------------------------------------------------------------------------------------------------------------------------------------
9    node_61 (ScaleBias)          (h:16, w:16, c:64)   128/512           32,768      node_60        |                                          bn()[6]     
------------------------------------------------------------------------------------------------------------------------------------------------------------
10   node_62 (Conv2D)             (h:16, w:16, c:64)   36,928/147,712    9,437,248   node_61        |                       +16,384(+0.2%)     conv2d()[7] 
------------------------------------------------------------------------------------------------------------------------------------------------------------
11   node_63 (Nonlinearity)       (h:16, w:16, c:64)                     16,384      node_62        |                       -16,384(-100.0%)  
------------------------------------------------------------------------------------------------------------------------------------------------------------
12   node_64 (ScaleBias)          (h:16, w:16, c:64)   128/512           32,768      node_63        |                                          bn()[8]     
------------------------------------------------------------------------------------------------------------------------------------------------------------
13   node_65 (Pool)               (h:8, w:8, c:64)                       16,384      node_64        |                                          pool()[9]   
------------------------------------------------------------------------------------------------------------------------------------------------------------
14   node_66 (Conv2D)             (h:8, w:8, c:64)     36,928/147,712    2,359,360   node_65        |                       +4,096(+0.2%)      conv2d()[10]
------------------------------------------------------------------------------------------------------------------------------------------------------------
15   node_67 (Nonlinearity)       (h:8, w:8, c:64)                       4,096       node_66        |                       -4,096(-100.0%)   
------------------------------------------------------------------------------------------------------------------------------------------------------------
16   node_68 (ScaleBias)          (h:8, w:8, c:64)     128/512           8,192       node_67        |                                          bn()[11]    
------------------------------------------------------------------------------------------------------------------------------------------------------------
17   node_69 (Conv2D)             (h:8, w:8, c:64)     36,928/147,712    2,359,360   node_68        |                       +4,096(+0.2%)      conv2d()[12]
------------------------------------------------------------------------------------------------------------------------------------------------------------
18   node_70 (Nonlinearity)       (h:8, w:8, c:64)                       4,096       node_69        |                       -4,096(-100.0%)   
------------------------------------------------------------------------------------------------------------------------------------------------------------
19   node_71 (ScaleBias)          (h:8, w:8, c:64)     128/512           8,192       node_70        |                                          bn()[13]    
------------------------------------------------------------------------------------------------------------------------------------------------------------
20   node_72 (Pool)               (h:4, w:4, c:64)                       4,096       node_71        |                                          pool()[14]  
------------------------------------------------------------------------------------------------------------------------------------------------------------
21   node_73 (Reshape)            (c:1024)                                           node_72        |                                         
------------------------------------------------------------------------------------------------------------------------------------------------------------
22   fc1weight (Placeholder)      (h:1024, c:128)      131,072/524,288                              |   -524,288(-100.0%)                     
     fc1bias (Placeholder)        (c:128)              128/512                                      |   -512(-100.0%)                         
     node_74 (Gemm)               (c:128)                                131,072     node_73        |   +524,800(+100.0%)                      gemm()[15]  
                                                                                     fc1weight      |  
                                                                                     fc1bias        |  
------------------------------------------------------------------------------------------------------------------------------------------------------------
23   node_75 (Nonlinearity)       (c:128)                                128         node_74        |                                          nl()[16]    
------------------------------------------------------------------------------------------------------------------------------------------------------------
24   node_76 (ScaleBias)          (c:128)              256/1,024         256         node_75        |                                          bn()[17]    
------------------------------------------------------------------------------------------------------------------------------------------------------------
25   fc2weight (Placeholder)      (h:128, c:10)        1,280/5,120                                  |   -5,120(-100.0%)                       
     fc2bias (Placeholder)        (c:10)               10/40                                        |   -40(-100.0%)                          
     node_77 (Gemm)               (c:10)                                 1,280       node_76        |   +5,160(+100.0%)                        gemm()[18]  
                                                                                     fc2weight      |  
                                                                                     fc2bias        |  
------------------------------------------------------------------------------------------------------------------------------------------------------------
26   modelOutput (Nonlinearity)   (c:10)                                 150         node_77        |                                          nl()/o[19]  
------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=29,702,230/29,702,230  weights=1,091,240/1,091,240  activations=--/139,648 io=--/12,328


Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name         : network
c-name             : network
c-node #           : 20
c-array #          : 51
activations size   : 139648
weights size       : 1091240
macc               : 29702230
inputs             : ['modelInput_output_array']
outputs            : ['modelOutput_output_array']


C-Arrays (51)
------------------------------------------------------------------------------------------------------------------------
c_id  name (*_array)      item/size           mem-pool     c-type       fmt    comment            
------------------------------------------------------------------------------------------------------------------------
0     modelInput_output   3072/12288          user         float        float  /input             
1     node_52_output      32768/131072        activations  float        float                     
2     node_54_output      32768/131072        activations  float        float                     
3     node_55_output      32768/131072        activations  float        float                     
4     node_57_output      32768/131072        activations  float        float                     
5     node_58_output      8192/32768          activations  float        float                     
6     node_59_output      16384/65536         activations  float        float                     
7     node_61_output      16384/65536         activations  float        float                     
8     node_62_output      16384/65536         activations  float        float                     
9     node_64_output      16384/65536         activations  float        float                     
10    node_65_output      4096/16384          activations  float        float                     
11    node_66_output      4096/16384          activations  float        float                     
12    node_68_output      4096/16384          activations  float        float                     
13    node_69_output      4096/16384          activations  float        float                     
14    node_71_output      4096/16384          activations  float        float                     
15    node_72_output      1024/4096           activations  float        float                     
16    node_74_output      128/512             activations  float        float                     
17    node_75_output      128/512             activations  float        float                     
18    node_76_output      128/512             activations  float        float                     
19    node_77_output      10/40               activations  float        float                     
20    modelOutput_output  10/40               user         float        float  /output            
21    fc2bias             10/40               weights      const float  float                     
22    fc2weight           1280/5120           weights      const float  float                     
23    fc1bias             128/512             weights      const float  float                     
24    fc1weight           131072/524288       weights      const float  float                     
25    node_52_weights     864/3456            weights      const float  float                     
26    node_52_bias        32/128              weights      const float  float                     
27    node_54_scale       32/128              weights      const float  float                     
28    node_54_bias        32/128              weights      const float  float                     
29    node_55_weights     9216/36864          weights      const float  float                     
30    node_55_bias        32/128              weights      const float  float                     
31    node_57_scale       32/128              weights      const float  float                     
32    node_57_bias        32/128              weights      const float  float                     
33    node_59_weights     18432/73728         weights      const float  float                     
34    node_59_bias        64/256              weights      const float  float                     
35    node_61_scale       64/256              weights      const float  float                     
36    node_61_bias        64/256              weights      const float  float                     
37    node_62_weights     36864/147456        weights      const float  float                     
38    node_62_bias        64/256              weights      const float  float                     
39    node_64_scale       64/256              weights      const float  float                     
40    node_64_bias        64/256              weights      const float  float                     
41    node_66_weights     36864/147456        weights      const float  float                     
42    node_66_bias        64/256              weights      const float  float                     
43    node_68_scale       64/256              weights      const float  float                     
44    node_68_bias        64/256              weights      const float  float                     
45    node_69_weights     36864/147456        weights      const float  float                     
46    node_69_bias        64/256              weights      const float  float                     
47    node_71_scale       64/256              weights      const float  float                     
48    node_71_bias        64/256              weights      const float  float                     
49    node_76_scale       128/512             weights      const float  float                     
50    node_76_bias        128/512             weights      const float  float                     
------------------------------------------------------------------------------------------------------------------------


C-Layers (20)
------------------------------------------------------------------------------------------------------------------------
c_id  name (*_layer)  id  layer_t macc        rom         tensors                shape (array id)                       
------------------------------------------------------------------------------------------------------------------------
0     node_52         1   conv2d  917536      3584        I: modelInput_output   [1, 32, 32, 3] (0)                     
                                                          W: node_52_weights                                            
                                                          W: node_52_bias                                               
                                                          O: node_52_output      [1, 32, 32, 32] (1)                    
------------------------------------------------------------------------------------------------------------------------
1     node_54         2   bn      65536       256         I: node_52_output      [1, 32, 32, 32] (1)                    
                                                          W: node_54_scale                                              
                                                          W: node_54_bias                                               
                                                          O: node_54_output      [1, 32, 32, 32] (2)                    
------------------------------------------------------------------------------------------------------------------------
2     node_55         4   conv2d  9469984     36992       I: node_54_output      [1, 32, 32, 32] (2)                    
                                                          W: node_55_weights                                            
                                                          W: node_55_bias                                               
                                                          O: node_55_output      [1, 32, 32, 32] (3)                    
------------------------------------------------------------------------------------------------------------------------
3     node_57         5   bn      65536       256         I: node_55_output      [1, 32, 32, 32] (3)                    
                                                          W: node_57_scale                                              
                                                          W: node_57_bias                                               
                                                          O: node_57_output      [1, 32, 32, 32] (4)                    
------------------------------------------------------------------------------------------------------------------------
4     node_58         6   pool    32768       0           I: node_57_output      [1, 32, 32, 32] (4)                    
                                                          O: node_58_output      [1, 16, 16, 32] (5)                    
------------------------------------------------------------------------------------------------------------------------
5     node_59         8   conv2d  4735040     73984       I: node_58_output      [1, 16, 16, 32] (5)                    
                                                          W: node_59_weights                                            
                                                          W: node_59_bias                                               
                                                          O: node_59_output      [1, 16, 16, 64] (6)                    
------------------------------------------------------------------------------------------------------------------------
6     node_61         9   bn      32768       512         I: node_59_output      [1, 16, 16, 64] (6)                    
                                                          W: node_61_scale                                              
                                                          W: node_61_bias                                               
                                                          O: node_61_output      [1, 16, 16, 64] (7)                    
------------------------------------------------------------------------------------------------------------------------
7     node_62         11  conv2d  9453632     147712      I: node_61_output      [1, 16, 16, 64] (7)                    
                                                          W: node_62_weights                                            
                                                          W: node_62_bias                                               
                                                          O: node_62_output      [1, 16, 16, 64] (8)                    
------------------------------------------------------------------------------------------------------------------------
8     node_64         12  bn      32768       512         I: node_62_output      [1, 16, 16, 64] (8)                    
                                                          W: node_64_scale                                              
                                                          W: node_64_bias                                               
                                                          O: node_64_output      [1, 16, 16, 64] (9)                    
------------------------------------------------------------------------------------------------------------------------
9     node_65         13  pool    16384       0           I: node_64_output      [1, 16, 16, 64] (9)                    
                                                          O: node_65_output      [1, 8, 8, 64] (10)                     
------------------------------------------------------------------------------------------------------------------------
10    node_66         15  conv2d  2363456     147712      I: node_65_output      [1, 8, 8, 64] (10)                     
                                                          W: node_66_weights                                            
                                                          W: node_66_bias                                               
                                                          O: node_66_output      [1, 8, 8, 64] (11)                     
------------------------------------------------------------------------------------------------------------------------
11    node_68         16  bn      8192        512         I: node_66_output      [1, 8, 8, 64] (11)                     
                                                          W: node_68_scale                                              
                                                          W: node_68_bias                                               
                                                          O: node_68_output      [1, 8, 8, 64] (12)                     
------------------------------------------------------------------------------------------------------------------------
12    node_69         18  conv2d  2363456     147712      I: node_68_output      [1, 8, 8, 64] (12)                     
                                                          W: node_69_weights                                            
                                                          W: node_69_bias                                               
                                                          O: node_69_output      [1, 8, 8, 64] (13)                     
------------------------------------------------------------------------------------------------------------------------
13    node_71         19  bn      8192        512         I: node_69_output      [1, 8, 8, 64] (13)                     
                                                          W: node_71_scale                                              
                                                          W: node_71_bias                                               
                                                          O: node_71_output      [1, 8, 8, 64] (14)                     
------------------------------------------------------------------------------------------------------------------------
14    node_72         20  pool    4096        0           I: node_71_output      [1, 8, 8, 64] (14)                     
                                                          O: node_72_output      [1, 4, 4, 64] (15)                     
------------------------------------------------------------------------------------------------------------------------
15    node_74         22  gemm    131072      524800      I: node_72_output0     [1, 1, 1, 1024] (15)                   
                                                          I: fc1weight           [1, 1024, 1, 128] (24)                 
                                                          I: fc1bias             [1, 1, 1, 128] (23)                    
                                                          O: node_74_output      [1, 1, 1, 128] (16)                    
------------------------------------------------------------------------------------------------------------------------
16    node_75         23  nl      128         0           I: node_74_output      [1, 1, 1, 128] (16)                    
                                                          O: node_75_output      [1, 1, 1, 128] (17)                    
------------------------------------------------------------------------------------------------------------------------
17    node_76         24  bn      256         1024        I: node_75_output      [1, 1, 1, 128] (17)                    
                                                          W: node_76_scale                                              
                                                          W: node_76_bias                                               
                                                          O: node_76_output      [1, 1, 1, 128] (18)                    
------------------------------------------------------------------------------------------------------------------------
18    node_77         25  gemm    1280        5160        I: node_76_output      [1, 1, 1, 128] (18)                    
                                                          I: fc2weight           [1, 128, 1, 10] (22)                   
                                                          I: fc2bias             [1, 1, 1, 10] (21)                     
                                                          O: node_77_output      [1, 1, 1, 10] (19)                     
------------------------------------------------------------------------------------------------------------------------
19    modelOutput     26  nl      150         0           I: node_77_output      [1, 1, 1, 10] (19)                     
                                                          O: modelOutput_output  [1, 1, 1, 10] (20)                     
------------------------------------------------------------------------------------------------------------------------



Complexity report per layer - macc=29,702,230 weights=1,091,240 act=139,648 ram_io=12,328
----------------------------------------------------------------------------
id   name          c_macc                    c_rom                     c_id
----------------------------------------------------------------------------
0    node_52       ||                 3.1%   |                  0.3%   [0] 
2    node_54       |                  0.2%   |                  0.0%   [1] 
3    node_55       ||||||||||||||||  31.9%   ||                 3.4%   [2] 
5    node_57       |                  0.2%   |                  0.0%   [3] 
6    node_58       |                  0.1%   |                  0.0%   [4] 
7    node_59       ||||||||          15.9%   |||                6.8%   [5] 
9    node_61       |                  0.1%   |                  0.0%   [6] 
10   node_62       |||||||||||||||   31.8%   |||||             13.5%   [7] 
12   node_64       |                  0.1%   |                  0.0%   [8] 
13   node_65       |                  0.1%   |                  0.0%   [9] 
14   node_66       ||||               8.0%   |||||             13.5%   [10]
16   node_68       |                  0.0%   |                  0.0%   [11]
17   node_69       ||||               8.0%   |||||             13.5%   [12]
19   node_71       |                  0.0%   |                  0.0%   [13]
20   node_72       |                  0.0%   |                  0.0%   [14]
22   node_74       |                  0.4%   ||||||||||||||||  48.1%   [15]
23   node_75       |                  0.0%   |                  0.0%   [16]
24   node_76       |                  0.0%   |                  0.1%   [17]
25   node_77       |                  0.0%   |                  0.5%   [18]
26   modelOutput   |                  0.0%   |                  0.0%   [19]

Generated files (5)
------------------------------------------------------------------------------------------------------------------------
C:\Users\vlavi\.stm32cubemx\network_config.h
C:\Users\vlavi\.stm32cubemx\network.h
C:\Users\vlavi\.stm32cubemx\network.c
C:\Users\vlavi\.stm32cubemx\network_data.h
C:\Users\vlavi\.stm32cubemx\network_data.c
